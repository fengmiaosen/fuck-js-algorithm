## 观察者模式和发布-订阅模式

观察者模式和发布-订阅模式都是常用的设计模式，用于处理对象间的通信和事件通知。虽然它们有相似之处，但在实现方式和应用场景上存在一些关键区别。

### 观察者模式 (Observer Pattern)

#### 定义
观察者模式是一种一对多的关系，其中一个对象（主题或被观察者）维护一系列依赖于它的对象（观察者），并在自身状态变化时通知这些观察者。

#### 特点
- **直接关联**：观察者与主题之间存在直接的引用关系。
- **状态变化通知**：主题在状态变化时会主动通知所有注册的观察者。
- **简单**：通常适用于简单的场景。

#### 示例
1. **场景**：天气监测系统。
2. **实现**：
   - `WeatherStation` 作为被观察者，维护一个观察者列表。
   - `Display` 作为观察者，注册到 `WeatherStation` 上。
   - 当天气状态变化时，`WeatherStation` 通知所有注册的 `Display` 更新显示。

### 发布-订阅模式 (Publish-Subscribe Pattern)

#### 定义
发布-订阅模式是一种更松散耦合的设计模式，其中发布者（Publisher）生成事件并将其发布到消息通道，而订阅者（Subscriber）订阅感兴趣的事件。

#### 特点
- **解耦合**：发布者和订阅者之间没有直接的引用关系，通常通过一个消息代理（如事件总线）进行通信。
- **灵活性**：可以动态添加和移除订阅者，适合复杂的系统。
- **多对多关系**：支持多个发布者和多个订阅者之间的交互。

#### 示例
1. **场景**：消息系统。
2. **实现**：
   - `EventBus` 作为消息代理，负责管理事件的发布和订阅。
   - `NewsPublisher` 作为发布者，发布新闻事件。
   - `UserSubscriber` 作为订阅者，注册到 `EventBus` 以接收新闻事件。

### 主要区别

| 特点               | 观察者模式                      | 发布-订阅模式                   |
|--------------------|---------------------------------|---------------------------------|
| **耦合度**         | 高耦合（观察者直接引用主题）    | 低耦合（通过消息代理）         |
| **关系类型**       | 一对多                          | 多对多                          |
| **通知机制**       | 主动通知                        | 被动接收（订阅者主动订阅）     |
| **使用场景**       | 简单场景，如状态变化通知        | 复杂场景，如事件处理和异步通信 |

### 总结

观察者模式适用于简单的事件通知，而发布-订阅模式则提供了更大的灵活性和解耦性，适合于需要处理多个发布者和订阅者的复杂系统。选择使用哪种模式取决于具体的需求和系统架构。

## 参考资料

* [框架源码中用来提高扩展性的设计模式](https://juejin.im/post/5ed0a2286fb9a047e02ef121)
* [不知道怎么封装代码？看看这几种设计模式吧](https://juejin.im/post/5ec737b36fb9a04799583002)
* [不知道怎么提高代码复用性？看看这几种设计模式吧！](https://juejin.im/post/5ecb67846fb9a047b534a346)