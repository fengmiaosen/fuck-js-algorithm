
* [P90百分位数的含义，服务器响应时间衡量指标](https://www.cnblogs.com/hunternet/p/14354983.html)
* [Elasticsearch百分位计算](https://www.elastic.co/guide/cn/elasticsearch/guide/current/percentiles.html)
* [clickhouse quantileTiming](https://clickhouse.tech/docs/zh/sql-reference/aggregate-functions/reference/quantiletiming/)


## PX值

用我们软件开发行业的例子通俗来讲就是，假设有100个请求，按照响应时间从小到大排列，位置为X的值，即为PX值。

在真正使用过程中，最常用的主要有P50(中位数)、P95、P99。

P50: 即中位数值。100个请求按照响应时间从小到大排列，位置为50的值，即为P50值。如果响应时间的P50值为200ms，代表我们有半数的用户响应耗时在200ms之内，有半数的用户响应耗时大于200ms。如果你觉得中位数值不够精确，那么可以使用P95和P99.9

P95：响应耗时从小到大排列，顺序处于95%位置的值即为P95值。

还是采用上面那个例子，100个请求按照响应时间从小到大排列，位置为95的值，即为P95值。 我们假设该值为200ms，那这个值又表示什么意思呢？

意思是说，我们对95%的用户的响应耗时在200ms之内，只有5%的用户的响应耗时大于200ms，据此，我们掌握了更精确的服务响应耗时信息。

P99.9：许多大型的互联网公司会采用P99.9值，也就是99.9%用户耗时作为指标，意思就是1000个用户里面，999个用户的耗时上限，通过测量与优化该值，就可保证绝大多数用户的使用体验。 至于P99.99值，优化成本过高，而且服务响应由于网络波动、系统抖动等不能解决之情况，因此大多数时候都不考虑该指标

在服务器响应时间的衡量指标中，P90（第90百分位数）是一个重要的统计指标，用于评估系统性能。它的含义如下：

## P90百分位数的含义

### 定义

- **P90百分位数**：在一组响应时间数据中，P90表示90%的请求响应时间小于或等于这个值。这意味着，如果你有100个请求，其中90个请求的响应时间是小于或等于P90的值，只有10个请求的响应时间超过了这个值。

### 重要性

1. **性能评估**：
   - P90可以帮助团队了解大多数用户的体验，特别是在高负载情况下。它提供了一个比平均响应时间更有意义的视角，因为平均值可能会受到极端值的影响。

2. **用户体验**：
   - 通过关注P90，可以更好地理解用户在使用系统时的实际体验，确保大部分用户的请求能够在合理的时间内得到响应。

3. **识别性能瓶颈**：
   - 如果P90响应时间显著高于预期，可能表明系统在高负载或特定条件下存在性能瓶颈，需要进行优化。

### 示例

假设一组响应时间（单位为毫秒）如下：

```
50, 60, 70, 80, 90, 100, 110, 120, 130, 140
```

- 排序后，这组数据是：50, 60, 70, 80, 90, 100, 110, 120, 130, 140
- 在这组数据中，P90的值是130毫秒。这意味着90%的请求响应时间都在130毫秒以内。

### 总结

P90百分位数是一个有用的性能指标，能够帮助开发和运维团队更好地理解和优化服务器的响应时间，提高用户体验。