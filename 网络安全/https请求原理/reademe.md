
HTTPS（超文本传输安全协议）是 HTTP 的安全版本，通过在 HTTP 协议上添加 SSL/TLS 加密层来提高数据传输的安全性。下面是 HTTPS 请求的原理和流程的详细介绍：

### 1. **HTTPS 的工作原理**

#### 1.1. **加密通信**

- **加密**: HTTPS 使用 SSL/TLS 协议对数据进行加密，确保传输内容的机密性，防止被中间人窃取。
- **完整性**: 确保数据在传输过程中未被篡改。
- **身份验证**: 通过数字证书验证服务器的身份，确保用户与真正的服务器通信。

### 2. **HTTPS 请求的流程**

#### 2.1. **建立连接**

1. **客户端发起请求**:
   - 客户端（如浏览器）向服务器发送一个 HTTPS 请求，首先通过 TCP 建立连接。

2. **SSL/TLS 握手**:
   - 一旦 TCP 连接建立后，客户端和服务器进行 SSL/TLS 握手，过程如下：

   - **客户端 Hello**:
     - 客户端发送一条消息，包含支持的 SSL/TLS 版本、加密算法、随机数等信息。

   - **服务器 Hello**:
     - 服务器返回一条消息，选择 SSL/TLS 版本、加密算法，并发送其数字证书（包含公钥）。

   - **证书验证**:
     - 客户端验证服务器的数字证书是否由受信任的证书机构（CA）签发，确保证书的有效性。

   - **生成会话密钥**:
     - 客户端生成一个随机的会话密钥，并使用服务器的公钥加密后发送给服务器。

   - **服务器解密**:
     - 服务器使用私钥解密收到的会话密钥。

3. **加密通信**:
   - 现在，客户端和服务器都有了相同的会话密钥，后续的所有数据传输都使用该密钥进行加密。

#### 2.2. **数据传输**

- **HTTP 请求**:
   - 客户端发送 HTTP 请求，数据经过加密后传输到服务器。

- **HTTP 响应**:
   - 服务器处理请求并返回 HTTP 响应，响应数据同样经过加密。

### 3. **HTTPS 的优点**

- **数据加密**: 保护用户隐私，防止数据被窃取。
- **身份验证**: 通过数字证书验证服务器身份，降低钓鱼攻击风险。
- **数据完整性**: 确保数据在传输过程中未被篡改。

### 4. **HTTPS 的缺点**

- **性能开销**: SSL/TLS 握手和加密解密过程会增加一定的 CPU 和延迟开销。
- **复杂性**: 配置和管理 SSL/TLS 证书需要额外的工作。

### 总结

HTTPS 通过 SSL/TLS 加密层增强了 HTTP 的安全性，确保数据传输的机密性、完整性和身份验证。了解 HTTPS 的工作原理有助于提升网络安全意识和应用安全性。

### 参考资料

* [一次安全可靠的通信——HTTPS原理](https://developers.weixin.qq.com/community/develop/article/doc/000046a5fdc7802a15f7508b556413)
* [HTTPS原理及握手过程](https://github.com/liuhanqu/fe-interview/issues/1)
* [HTTPS篇](https://juejin.cn/post/6844904150115827725)