

二、WHAT：WebSocket 是什么？

WebSocket 是基于 TCP 的一种新的应用层网络协议。它实现了浏览器与服务器全双工通信，即允许服务器主动发送信息给客户端。因此，在 WebSocket 中，浏览器和服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输，客户端和服务器之间的数据交换变得更加简单。

关键词：应用层协议、基于 TCP、全双工通信、一次握手、持久连接、双向数据传输

2.1、WebSocket 的特点

建立在 TCP 协议之上；

与 HTTP 协议有着良好的兼容性：默认端口也是 80（ws） 和 443(wss，运行在 TLS 之上)，并且**握手阶段采用 HTTP 协议**；
**握手阶段采用 HTTP 协议**，因此可以使用 HTTP 协议的所有功能，比如 Cookie、Session 等；

较少的控制开销：连接创建后，ws 客户端、服务端进行数据交换时，协议控制的数据包头部较小，而 HTTP 协议每次通信都需要携带完整的头部；

可以发送文本，也可以发送二进制数据；

没有同源限制，客户端可以与任意服务器通信；

协议标识符是 ws（如果加密，则为 wss），服务器网址就是 URL；

支持扩展：ws 协议定义了扩展，用户可以扩展协议，或者实现自定义的子协议（比如支持自定义压缩算法等）；

2.2、 WebSocket 与 HTTP、TCP

HTTP、WebSocket 等协议都是处于 OSI 模型的最高层：应用层。而 IP 协议工作在网络层，TCP 协议工作在传输层。

HTTP、WebSocket 等应用层协议，都是基于 TCP 协议来传输数据的，因此其连接和断开，都要遵循 TCP 协议中的三次握手和四次挥手 ，只是在连接之后发送的内容不同，或者是断开的时间不同。

作者：禾味
链接：https://juejin.cn/post/7086021621542027271
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。


* [WebSocket｜概念、原理、用法及实践](https://juejin.cn/post/7086021621542027271?searchId=202310291409027DE306F3287B861FA67C)

