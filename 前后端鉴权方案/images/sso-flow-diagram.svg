<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #333; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
      .step { font-family: Arial, sans-serif; font-size: 11px; fill: #666; }
      .box { fill: #f0f8ff; stroke: #4682b4; stroke-width: 2; rx: 8; }
      .sso-box { fill: #fff5ee; stroke: #ff6347; stroke-width: 2; rx: 8; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .dashed { stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">单点登录（SSO）流程图</text>
  
  <!-- User -->
  <rect x="50" y="80" width="80" height="60" class="box" />
  <text x="90" y="115" text-anchor="middle" class="label">用户</text>
  
  <!-- Business System A -->
  <rect x="250" y="80" width="100" height="60" class="box" />
  <text x="300" y="110" text-anchor="middle" class="label">业务系统A</text>
  <text x="300" y="125" text-anchor="middle" class="step">(app.example.com)</text>
  
  <!-- SSO System -->
  <rect x="500" y="80" width="100" height="60" class="sso-box" />
  <text x="550" y="110" text-anchor="middle" class="label">SSO认证服务</text>
  <text x="550" y="125" text-anchor="middle" class="step">(sso.example.com)</text>
  
  <!-- Business System B -->
  <rect x="250" y="480" width="100" height="60" class="box" />
  <text x="300" y="510" text-anchor="middle" class="label">业务系统B</text>
  <text x="300" y="525" text-anchor="middle" class="step">(admin.example.com)</text>
  
  <!-- Step 1: User accesses System A -->
  <line x1="130" y1="110" x2="240" y2="110" class="arrow" />
  <text x="185" y="105" text-anchor="middle" class="step">1. 访问系统A</text>
  
  <!-- Step 2: Redirect to SSO -->
  <line x1="350" y1="100" x2="490" y2="100" class="arrow" />
  <text x="420" y="95" text-anchor="middle" class="step">2. 重定向到SSO</text>
  <text x="420" y="108" text-anchor="middle" class="step">(未登录)</text>
  
  <!-- Step 3: User login -->
  <line x1="490" y1="120" x2="350" y2="120" class="arrow" />
  <text x="420" y="135" text-anchor="middle" class="step">3. 用户登录</text>
  
  <!-- Step 4: Return ticket -->
  <line x1="500" y1="140" x2="360" y2="140" class="arrow" />
  <text x="430" y="155" text-anchor="middle" class="step">4. 返回ticket</text>
  
  <!-- Step 5: Verify ticket -->
  <line x1="350" y1="160" x2="490" y2="160" class="arrow dashed" />
  <text x="420" y="175" text-anchor="middle" class="step">5. 验证ticket</text>
  
  <!-- Step 6: Confirm valid -->
  <line x1="490" y1="180" x2="360" y2="180" class="arrow dashed" />
  <text x="425" y="195" text-anchor="middle" class="step">6. 确认有效</text>
  
  <!-- Step 7: Access granted -->
  <line x1="240" y1="130" x2="140" y2="130" class="arrow" />
  <text x="190" y="145" text-anchor="middle" class="step">7. 访问成功</text>
  
  <!-- Separator line -->
  <line x1="50" y1="250" x2="750" y2="250" stroke="#ccc" stroke-width="1" stroke-dasharray="10,5" />
  <text x="400" y="270" text-anchor="middle" class="step" style="font-size: 14px; fill: #666;">用户再次访问其他系统</text>
  
  <!-- Step 8: User accesses System B -->
  <line x1="90" y1="300" x2="90" y2="470" class="arrow" />
  <text x="110" y="385" class="step">8. 访问系统B</text>
  
  <line x1="130" y1="510" x2="240" y2="510" class="arrow" />
  
  <!-- Step 9: Check SSO status -->
  <line x1="350" y1="500" x2="490" y2="500" class="arrow dashed" />
  <text x="420" y="495" text-anchor="middle" class="step">9. 检查SSO状态</text>
  
  <!-- Step 10: Already logged in -->
  <line x1="490" y1="520" x2="360" y2="520" class="arrow dashed" />
  <text x="425" y="535" text-anchor="middle" class="step">10. 已登录状态</text>
  
  <!-- Step 11: Direct access -->
  <line x1="240" y1="530" x2="140" y2="530" class="arrow" />
  <text x="190" y="545" text-anchor="middle" class="step">11. 直接访问</text>
  
  <!-- Legend -->
  <rect x="650" y="300" width="120" height="120" fill="none" stroke="#ccc" stroke-width="1" />
  <text x="710" y="320" text-anchor="middle" class="label">图例</text>
  
  <line x1="660" y1="340" x2="690" y2="340" class="arrow" />
  <text x="700" y="345" class="step">HTTP请求</text>
  
  <line x1="660" y1="360" x2="690" y2="360" class="arrow dashed" />
  <text x="700" y="365" class="step">后端验证</text>
  
  <rect x="660" y="375" width="20" height="15" class="box" />
  <text x="690" y="385" class="step">业务系统</text>
  
  <rect x="660" y="395" width="20" height="15" class="sso-box" />
  <text x="690" y="405" class="step">SSO服务</text>
</svg>