<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#333">Token 鉴权流程图</text>
  
  <!-- Client -->
  <rect x="50" y="80" width="120" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
  <text x="110" y="115" text-anchor="middle" font-size="14" font-weight="bold" fill="#1976d2">客户端</text>
  
  <!-- Server -->
  <rect x="630" y="80" width="120" height="60" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
  <text x="690" y="115" text-anchor="middle" font-size="14" font-weight="bold" fill="#7b1fa2">服务器</text>
  
  <!-- Local Storage -->
  <rect x="50" y="200" width="120" height="60" fill="#e8f5e8" stroke="#4caf50" stroke-width="2" rx="5"/>
  <text x="110" y="225" text-anchor="middle" font-size="12" font-weight="bold" fill="#4caf50">本地存储</text>
  <text x="110" y="245" text-anchor="middle" font-size="12" fill="#4caf50">(localStorage)</text>
  
  <!-- Step 1: Login Request -->
  <line x1="170" y1="160" x2="630" y2="160" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="155" text-anchor="middle" font-size="12" fill="#4caf50">1. 登录请求 (用户名/密码)</text>
  
  <!-- Step 2: Generate Token -->
  <line x1="630" y1="180" x2="170" y2="180" stroke="#ff9800" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="175" text-anchor="middle" font-size="12" fill="#ff9800">2. 返回 Token</text>
  
  <!-- Step 3: Store Token -->
  <line x1="110" y1="140" x2="110" y2="200" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="20" y="175" font-size="12" fill="#9c27b0">3. 存储Token</text>
  
  <!-- Step 4: Subsequent Request -->
  <line x1="170" y1="300" x2="630" y2="300" stroke="#2196f3" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="295" text-anchor="middle" font-size="12" fill="#2196f3">4. 请求 (Authorization: Bearer token)</text>
  
  <!-- Step 5: Validate Token -->
  <text x="690" y="280" text-anchor="middle" font-size="12" fill="#ff5722">5. 验证Token</text>
  
  <!-- Step 6: Response -->
  <line x1="630" y1="320" x2="170" y2="320" stroke="#795548" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="315" text-anchor="middle" font-size="12" fill="#795548">6. 返回响应数据</text>
  
  <!-- Token Structure -->
  <rect x="250" y="380" width="300" height="140" fill="#f5f5f5" stroke="#666" stroke-width="1" rx="5"/>
  <text x="260" y="400" font-size="14" font-weight="bold" fill="#333">Token 结构示例：</text>
  <text x="260" y="420" font-size="11" fill="#666" font-family="monospace">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.</text>
  <text x="260" y="435" font-size="11" fill="#666" font-family="monospace">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6</text>
  <text x="260" y="450" font-size="11" fill="#666" font-family="monospace">IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.</text>
  <text x="260" y="465" font-size="11" fill="#666" font-family="monospace">SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</text>
  <text x="260" y="490" font-size="12" fill="#333">包含：Header + Payload + Signature</text>
  <text x="260" y="510" font-size="12" fill="#666">• 无状态，服务端不存储</text>
  
  <!-- Token Advantages -->
  <rect x="50" y="380" width="180" height="140" fill="#e8f5e8" stroke="#4caf50" stroke-width="1" rx="5"/>
  <text x="60" y="400" font-size="14" font-weight="bold" fill="#333">Token 优点：</text>
  <text x="60" y="420" font-size="12" fill="#666">• 无状态，易扩展</text>
  <text x="60" y="440" font-size="12" fill="#666">• 支持跨域</text>
  <text x="60" y="460" font-size="12" fill="#666">• 移动端友好</text>
  <text x="60" y="480" font-size="12" fill="#666">• 可携带用户信息</text>
  <text x="60" y="500" font-size="12" fill="#666">• 防CSRF攻击</text>
  
  <!-- Token Disadvantages -->
  <rect x="570" y="380" width="180" height="140" fill="#ffebee" stroke="#f44336" stroke-width="1" rx="5"/>
  <text x="580" y="400" font-size="14" font-weight="bold" fill="#333">Token 缺点：</text>
  <text x="580" y="420" font-size="12" fill="#666">• 需手动携带</text>
  <text x="580" y="440" font-size="12" fill="#666">• Token泄露风险</text>
  <text x="580" y="460" font-size="12" fill="#666">• 无法主动失效</text>
  <text x="580" y="480" font-size="12" fill="#666">• 存储安全性</text>
  <text x="580" y="500" font-size="12" fill="#666">• 长度较长</text>
  
  <!-- Legend -->
  <text x="50" y="550" font-size="14" font-weight="bold" fill="#333">图例：</text>
  <line x1="120" y1="545" x2="160" y2="545" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="170" y="550" font-size="12" fill="#666">请求/响应流程</text>
</svg>